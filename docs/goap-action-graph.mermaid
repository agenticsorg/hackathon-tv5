%% GOAP Action Dependency Graph for Exogenesis Omega Deployment
%% Generated using A* pathfinding analysis

graph TB
    %% ==========================================
    %% MILESTONE 1: Environment Preparation
    %% ==========================================
    START([Initial State]) --> A1_1[1.1: Verify Rust Toolchain<br/>Cost: 2]
    START --> A1_3[1.3: Verify Docker<br/>Cost: 2]
    START --> A1_4[1.4: Create .env Config<br/>Cost: 1]
    START --> A1_6[1.6: Check Disk Space<br/>Cost: 1]
    START --> A1_7[1.7: Verify Ports Available<br/>Cost: 2]

    A1_1 --> A1_2[1.2: Install protoc<br/>Cost: 3]
    A1_1 --> A1_5[1.5: Verify Workspace<br/>Cost: 2]

    %% ==========================================
    %% MILESTONE 2: Dependency Resolution
    %% ==========================================
    A1_5 --> A2_1[2.1: Cargo Clean<br/>Cost: 1]
    A2_1 --> A2_2[2.2: Fetch Dependencies<br/>Cost: 4]

    A2_2 --> A2_3[2.3: Verify omega-* Crates<br/>Cost: 3]
    A2_2 --> A2_4[2.4: Check sqlx Compatibility<br/>Cost: 2]
    A2_2 --> A2_5[2.5: Verify gRPC Deps<br/>Cost: 3]

    A1_2 --> A2_5
    A2_3 & A2_4 & A2_5 --> A2_6[2.6: Pre-compile Build Scripts<br/>Cost: 5]

    %% ==========================================
    %% MILESTONE 3: Rust Compilation
    %% ==========================================
    A2_2 --> A3_1[3.1: Build omega-tv-brain<br/>Cost: 6]
    A2_2 --> A3_2[3.2: Build omega-tv-sync<br/>Cost: 5]
    A2_2 --> A3_3[3.3: Build omega-tv-sdk<br/>Cost: 5]
    A2_2 --> A3_7[3.7: Build omega-cli<br/>Cost: 4]

    A2_5 & A3_2 --> A3_4[3.4: Build omega-constellation<br/>Cost: 7]

    A3_4 --> A3_5[3.5: Build constellation-server<br/>Cost: 8]
    A3_4 --> A3_6[3.6: Build federation-worker<br/>Cost: 6]

    A3_5 & A3_6 --> A3_8[3.8: Run Unit Tests<br/>Cost: 7]

    %% ==========================================
    %% MILESTONE 4: Docker Image Construction
    %% ==========================================
    A3_5 --> A4_1[4.1: Verify Dockerfiles<br/>Cost: 1]
    A4_1 --> A4_2[4.2: Build Constellation Image<br/>Cost: 8]

    A3_6 & A4_1 --> A4_3[4.3: Build Federation Image<br/>Cost: 7]

    A4_2 --> A4_4[4.4: Test Image Health Checks<br/>Cost: 2]
    A4_2 --> A4_5[4.5: Verify Image Labels<br/>Cost: 1]

    A4_2 & A4_3 --> A4_6[4.6: Tag Images for Registry<br/>Cost: 1]
    A4_6 --> A4_7[4.7: Prune Dangling Images<br/>Cost: 2]

    %% ==========================================
    %% MILESTONE 5: Docker Compose Orchestration
    %% ==========================================
    A1_4 --> A5_1[5.1: Load Environment Variables<br/>Cost: 1]
    A1_3 --> A5_2[5.2: Pull RuVector Image<br/>Cost: 4]

    A4_2 & A4_3 & A5_1 & A5_2 --> A5_3[5.3: Start Docker Compose<br/>Cost: 5]

    A5_3 --> A5_4[5.4: Monitor Database Init<br/>Cost: 4]
    A5_4 --> A5_5[5.5: Verify init-db.sql<br/>Cost: 3]

    A5_5 --> A5_6[5.6: Wait for Health Checks<br/>Cost: 5]
    A5_6 --> A5_7[5.7: Check Monitoring Stack<br/>Cost: 3]

    A5_6 --> A5_8[5.8: Inspect Service Logs<br/>Cost: 2]
    A5_6 --> A5_9[5.9: Verify Network Connectivity<br/>Cost: 2]

    %% ==========================================
    %% MILESTONE 6: API & gRPC Validation
    %% ==========================================
    A5_6 --> A6_1[6.1: Test REST API Health<br/>Cost: 3]
    A6_1 --> A6_2[6.2: Test Metrics Endpoint<br/>Cost: 2]

    A5_6 --> A6_3[6.3: Test gRPC Sync<br/>Cost: 5]

    A6_1 --> A6_4[6.4: Load Test REST API<br/>Cost: 4]
    A6_1 & A5_5 --> A6_5[6.5: Test DB Connection<br/>Cost: 3]
    A6_1 --> A6_6[6.6: Test Cross-Replica Consistency<br/>Cost: 3]

    A5_5 --> A6_7[6.7: Test RuVector Performance<br/>Cost: 5]

    %% ==========================================
    %% MILESTONE 7: Monitoring Integration
    %% ==========================================
    A5_7 & A5_6 --> A7_1[7.1: Verify Prometheus Targets<br/>Cost: 3]
    A7_1 --> A7_2[7.2: Query Prometheus Metrics<br/>Cost: 3]

    A5_7 --> A7_3[7.3: Configure Grafana Datasource<br/>Cost: 2]
    A7_3 --> A7_4[7.4: Import Dashboard<br/>Cost: 4]
    A7_4 --> A7_5[7.5: Set Up Alerts<br/>Cost: 3]
    A7_5 --> A7_6[7.6: Test Dashboard Rendering<br/>Cost: 2]

    %% ==========================================
    %% MILESTONE 8: Integration Testing
    %% ==========================================
    A6_1 & A6_3 --> A8_1[8.1: Create Test Suite<br/>Cost: 4]
    A8_1 & A5_6 --> A8_2[8.2: Run Integration Tests<br/>Cost: 6]

    A6_3 --> A8_3[8.3: Benchmark Sync Latency<br/>Cost: 5]
    A6_7 --> A8_4[8.4: Benchmark Vector Search<br/>Cost: 6]
    A5_4 --> A8_5[8.5: Test Raft Consensus<br/>Cost: 4]
    A5_6 --> A8_7[8.7: Chaos Test - Restart<br/>Cost: 4]

    A8_2 & A8_3 & A8_4 & A8_5 --> A8_6[8.6: Generate System Report<br/>Cost: 3]

    %% ==========================================
    %% GOAL STATE
    %% ==========================================
    A8_6 --> GOAL([Goal State Achieved<br/>10/10 Success Criteria])

    %% ==========================================
    %% STYLING
    %% ==========================================
    classDef critical fill:#ff6b6b,stroke:#c92a2a,stroke-width:3px,color:#fff
    classDef high fill:#ffd93d,stroke:#f59f00,stroke-width:2px
    classDef medium fill:#74c0fc,stroke:#1971c2,stroke-width:2px
    classDef low fill:#b2f2bb,stroke:#2f9e44,stroke-width:1px
    classDef milestone fill:#e599f7,stroke:#9c36b5,stroke-width:3px,color:#fff

    %% Critical path (12 actions)
    class A1_1,A2_2,A3_4,A3_5,A4_2,A5_3,A5_4,A5_6,A6_1,A6_3,A8_2,A8_6 critical

    %% High priority
    class A1_2,A1_5,A2_3,A2_5,A3_1,A3_2,A3_3,A4_3,A6_5,A6_7,A7_1,A7_2 high

    %% Medium priority
    class A1_3,A1_7,A2_4,A2_6,A3_8,A4_4,A5_5,A5_7,A5_8,A5_9,A6_4,A6_6,A7_3,A7_4,A8_3,A8_4,A8_5 medium

    %% Low priority
    class A1_4,A1_6,A2_1,A3_7,A4_5,A4_6,A4_7,A7_5,A7_6,A8_7 low

    %% Milestones
    class START,GOAL milestone
